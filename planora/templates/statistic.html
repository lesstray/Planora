{% extends 'layout.html' %}
{% load static %}
{% block title %}Planora - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞{% endblock %}

{% block content %}
<div class="statistics-page">
    <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
    <!-- –§–æ—Ä–º–∞ –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞ -->
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –¥–∞—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ</p>
    <form method="get" class="date-filter-form" style="margin-bottom: 1.5em;">
        <label for="start_date">–°:</label>
        <div class="input-block">
            <input type="date"
                   id="start_date"
                   name="start_date"
                   value="{{ start_date|date:'Y-m-d' }}" required>
        </div>
        <label for="end_date">–ü–æ:</label>
        <div class="input-block">
            <input type="date"
                   id="end_date"
                   name="end_date"
                   value="{{ end_date|date:'Y-m-d' }}" required>
        </div>
        <button type="submit" class="auth-button">–ü–æ–∫–∞–∑–∞—Ç—å</button>
    </form>
    <p>–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞: {{ start_date }} ‚Äî {{ end_date }}</p>

    <h2>üë®‚Äçüéì –°—Ç—É–¥–µ–Ω—Ç—ã</h2>
    <table>
        <thead>
            <tr>
                <th>–ò–º—è</th>
                <th>–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–π / –í—Å–µ–≥–æ</th>
                <th>–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å (%)</th>
                <th>–í—ã–ø–æ–ª–Ω–µ–Ω–æ –∑–∞–¥–∞—á / –í—Å–µ–≥–æ</th>
                <th>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á (%)</th>
                <th>–ü–∞—Ä –∑–∞ –ø–µ—Ä–∏–æ–¥</th>
                <th>–ó–∞–¥–∞—á –∑–∞ –ø–µ—Ä–∏–æ–¥</th>
            </tr>
        </thead>
        <tbody>
            {% for s in student_data %}
            <tr>
                <td>{{ s.name }}</td>
                <td>{{ s.present_total }} / {{ s.attend_total }}</td>
                <td>{{ s.attend_percent }}%</td>
                <td>{{ s.done_tasks }} / {{ s.total_tasks }}</td>
                <td>{{ s.done_percent }}%</td>
                <td>{{ s.lessons_in_period }}</td>
                <td>{{ s.tasks_in_period }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</h2>
    <table>
        <thead>
            <tr>
                <th>–ò–º—è</th>
                <th>–ì—Ä—É–ø–ø—ã</th>
                <th>–ü—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã—Ö –ø–∞—Ä –∑–∞ –ø–µ—Ä–∏–æ–¥</th>
            </tr>
        </thead>
        <tbody>
            {% for t in teacher_data %}
            <tr>
                <td>{{ t.name }}</td>
                <td>{{ t.groups|join:", " }}</td>
                <td>{{ t.lessons }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h2>üìà –ì—Ä–∞—Ñ–∏–∫–∏</h2>
    <img src="{% static 'reports/report.png' %}" alt="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤" style="max-width: 100%; height: auto;">
</div>
{% endblock %}
